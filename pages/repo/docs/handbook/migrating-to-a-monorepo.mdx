import Callout from "../../../../components/Callout";

# 迁移到 Monorepo

从多存储库设置迁移到单存储库设置可以为生产力带来巨大的好处，尤其是在以下情况下：

- 您发现很难在应用程序之间共享代码
- 您想要一个统一的方法来了解您的团队如何构建代码

转向单一仓库可能会令人生畏。 但是经过仔细的计划，它可以非常顺利地进行。

## 文件夹结构

让我们想象一下您的多仓库设置如下所示：

```
web (repo 1)
├─ package.json

docs (repo 2)
├─ package.json

app (repo 3)
├─ package.json
```

你有三个存储库，`web`、`docs` 和 `app`。 它们没有任何共享的依赖关系，但您已经注意到它们之间有 _很多_ 的重复代码。

在 monorepo 中组织它们的最佳方式是这样的：

```
my-monorepo
├─ apps
│  ├─ app
│  │  └─ package.json
│  ├─ docs
│  │  └─ package.json
│  └─ web
│     └─ package.json
└─ package.json
```

要开始共享代码，您可以使用 [内部包](/repo/docs/handbook/sharing-code/internal-packages) 模式，生成一个新的 `packages` 文件夹：

```
my-monorepo
├─ apps
│  ├─ app
│  │  └─ package.json
│  ├─ docs
│  │  └─ package.json
│  └─ web
│     └─ package.json
├─ packages
│  └─ shared
│     └─ package.json
└─ package.json
```

<Callout type="idea">
  如果您打算转移到 monorepo，请尝试勾画出确切的文件夹，你的目标结构。
</Callout>

## 设置工作区

一旦您的应用程序处于正确的文件夹结构中，您将需要设置工作区并安装您的依赖项。 我们关于 [设置工作空间](/repo/docs/handbook/workspaces) 的部分应该会有所帮助。

## 处理任务

现在你的工作区已经设置好了，你需要弄清楚你将如何在你的新 monorepo 中运行你的任务。 我们有以下部分：

1. 如何使用 Turborepo [配置任务](/repo/docs/core-concepts/running-tasks)。
2. 如何设置你的[开发任务](/repo/docs/handbook/dev)
3. 如何设置[linting](/repo/docs/handbook/linting)
4. 如何[构建您的应用程序](/repo/docs/handbook/building-your-app)
5. 如何设置[测试](/repo/docs/handbook/testing)
