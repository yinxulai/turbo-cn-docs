# 故障排除

## 处理不匹配的包版本

随着 monorepo 的增长，您最终可能会在不同的工作空间中使用不同版本的包。

例如：`app` 可能使用 `react@18.0.0`，但 `web` 可能使用 `react@17.0.0`。 当您刚刚[从多存储库设置迁移](/repo/docs/handbook/migrating-to-a-monorepo) 时尤其如此。

不同存储库中不匹配的依赖项可能意味着代码运行发生一些以为。 例如，如果安装了多个版本，React 就会出错。

#### `@manypkg/cli`

我们推荐的处理此问题的方法是使用 [`@manypkg/cli`](https://www.npmjs.com/package/@manypkg/cli) - 一个 CLI，它可以确保您的依赖项在您的存储库中匹配。

这是一个简单的例子。 在 `package.json` 的根目录下，添加一个 `postinstall` 脚本。

```json filename="package.json"
{
  "scripts": {
    // This will check your dependencies match
    // after each installation
    "postinstall": "manypkg check"
  },
  "dependencies": {
    // Make sure you install @manypkg/cli
    "@manypkg/cli": "latest"
  }
}
```

您还可以运行 `manypkg fix` 以在整个存储库中自动更新它们。
