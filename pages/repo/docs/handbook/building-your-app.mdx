import { Tabs, Tab } from "../../../../components/Tabs";
import Callout from "../../../../components/Callout";

# 编译你的 App

除非您的 monorepo 仅用于 [将包发布到 npm](/repo/docs/handbook/publishing-packages)，否则它可能至少包含一个应用程序。 使用 Turborepo 协调您的应用程序构建可以带来一些非凡的速度提升。

## 配置编译项

Turborepo 的工作原理是将您的工作空间任务保留在它们所属的位置 - 在每个工作空间的 `package.json` 中。 假设您有一个如下所示的 monorepo：

```
├── apps
│   └── web
│       └── package.json
├── package.json
└── turbo.json
```

你的 `apps/web/package.json` 里面应该有一个 `build` 脚本：

<Tabs items={['Next.js', 'Vite']} storageKey="selected-framework">
  <Tab>
```json filename="apps/web/package.json"
{
  "scripts": {
    "build": "next build"
  }
}
```
  </Tab>
  <Tab>
```json filename="apps/web/package.json"
{
  "scripts": {
    "build": "vite build"
  }
}
```
  </Tab>
</Tabs>

在 `turbo.json` 中，您可以将 `build` 添加到管道中。

<Tabs items={['Next.js', 'Vite']} storageKey="selected-framework">
  <Tab>
```json filename="turbo.json"
{
  "pipeline": {
    "build": {
      "outputs": [".next/**"]
    }
  }
}
```
  </Tab>
  <Tab>
```json filename="turbo.json"
{
  "pipeline": {
    "build": {
      "outputs": ["dist/**"]
    }
  }
}
```
  </Tab>
</Tabs>

<Callout type="info">

我们配置 `outputs` 以便我们可以启用 [caching](/repo/docs/core-concepts/caching) - Turborepo 的一个非常强大的功能，可以跳过以前完成的任务。

</Callout>

现在，将脚本添加到您的根 `package.json`：

```json filename="package.json"
{
  "scripts": {
    "build": "turbo run build"
  }
}
```

这意味着使用包管理器从根目录运行 `build` 将构建存储库中的所有应用程序。 多亏了 Turborepo 的任务缓存，您最终可以获得极快的构建时间。
